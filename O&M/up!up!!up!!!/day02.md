# day02

## 回顾

## Linux

## 前导

### 开发环境&生产环境

> 开发环境：
>
> Windows
>
> mac
>
> 生产环境：
>
> Linux
>
> Windows server

### web1.0，2.0

web1.0

![](imgs\单体架构.svg)

特点：

成本低，简单，更新维护简单

带宽不足，项目内容少，有些项目不需要对外开放，安全性稳定性要求不高

web2.0

![](imgs\单体架构02.svg)

特点：

在单体架构之上搭建集群，可以提升项目的稳定性，并发能力增强，可以避免单节点故障

- 用户请求到底在哪台服务器，如何保证请求平均分发给不同的服务器，从而缓解用户增加的压力

- 编写项目时，如果用户登录成功，将用户的标识放到session中，搭建集群成功后，数据共享问题

- 当数据量非常庞大的时候，如果还去直接查询数据库，速度会很慢

  - nginx，解决用户请求平均分发问题
  - redis，解决数据共享并实现缓存功能
  - elastic search，解决搜索数据的功能

  ![](imgs\单体架构3.svg)

  插入中间件Redis， Nginx，ElasticSearch

### 垂直架构

![](imgs\垂直架构.svg)

项目中包含了三个模块，用户模块，商品模块，订单模块，如果商品模块压力过大，一般最直接有效的方式是搭建集群，在单体架构的基础之上去搭建，效果相对较差

随着项目的不断迭代，项目中的新功能越来越多，最严重的可能导致项目无法启动

为了解决以上问题，演进出垂直架构

### 分布式架构

![](imgs\分布式架构.svg)

随着项目的迭代，新老模块之间需要相互交互，服务器和服务器之间，是需要通讯的

项目一般分三层，controller，service，dao，导致程序变慢，一般可能出现问题的是service或者dao，在搭建集群时，针对三层都做集群，效果不好

架构从垂直架构到分布式架构

目前的分布式架构有：

- dubbo
- spring cloud

### 运维成本docker

> 为了解决模块过多，运维成本增加，采用docker容器化技术帮我们管理各个模块的部署，还可以通过CI，CD持续集成，持续交付，持续部署

## 简介

> 一个分布式，多用户的操作系统
>
> 单节点故障
>
> 服务器集群
>
> Session共享
>
> 对比Windows
>
> - Linux是严格区分大小写的，Windows不需要
> - Linux一切皆文件
> - Linux文件是没有后缀的，但是也有一些约定俗成的后缀
> - Windows软件是无法直接在Linux下使用的

## 安装

> VMware
>
> virtual box
>
> pd

### 客户端工具

> final shell
>
> xshell
>
> ssh
>
> xterm

## 目录结构

> - root
> - bin
> - boot
> - etc
> - home
> - opt
> - usr

## 基本命令

> who am i/whoami
>
> ping ip或者域名
>
> ip a/ifconfig
>
> pwd
>
> clear
>
> ctrl + c

## 目录命令

### 列出目录

> ls [-ald] [目录名]
>
> 目录名不写，默认为当前目录
>
> -a：列出所有的文件或者文件夹，包括隐藏文件
>
> -l：列出全部的信息
>
> -d：仅查看目录本身

### 切换目录

> cd 具体路径 | 特殊符号
>
> | 特殊符号 | 表达路径   |
> | -------- | ---------- |
> | .        | 当前路径   |
> | ..       | 上一级目录 |
> | /        | 根目录     |
> | ~        | 家目录     |
> | -        | 返回       |

### 创建目录

> ```shell
> mkdir [-p] 目录名
> -p代表多级目录时使用
> 
> mkdir 00 11 22		#创建三个同级目录
> mkdir -p aa/bb/cc   #创建多级目录，aa不存在也会动态创建aa，然后再创建bb以及cc目录
> ```

### 删除目录

> ```shell
> 删除空目录
> rmdir 目录名
> rm [-rf] 目录名
> -r： 代表递归删除目录下的全部内容
> -f：不询问直接删除
> 
> 注意 rm -rf /*
> ```

### 复制目录

> ```sh
> cp -r 源目录 目标目录
> -r： 递归复制全部
> ```

### 移动、重命名

> ```shell
> mv 目录名 新目录名 | 路径
> 如果第二个参数不存在，就是重命名，如果第二个参数的轮径存在就是移动
> ```

## 文件命令

### 创建文件

> ```shell
> 创建空文件
> touch 文件名1 文件名2 ..
> ```

### 编辑文件

> 编辑文件，后期常用的命令之一
>
> vi 文件名 
>
> 进入查看模式
>
> i | a | o
>
> 进入编辑模式
>
> i是在光标位置进行插入
>
> a是在当前光标后一格进入编辑模式
>
> o当前光标下一行进入编辑模式
>
> esc 退出编辑模式，回到查看模式
>
> : 从查看模式进入底行命名模式
>
> wq：write & quit
>
> q!: 不保存退出
>
> 在查看模式下，使用ZZ也可以实现快速保持退出
>
> vi编辑器的其他操作
>
> set nu：	设置行号
>
> set nonu： 取消行号
>
> to 行号： 快速到达某一行
>
> G： 快速跳转到最后一行
>
> gg：快读跳转到第一行

### 查看文件

> ```shell
> #查看文件，直到文件的最后一行
> cat 文件名
> 
> #从第一行开始查看文件内容，展示全部
> tac 文件名
> 
> #从最后一行开始显示
> nl 文件名
> 
> #显示文件时，查看大文件时，可以一页一页的向下翻，也可以使用回车或者空格向下翻
> more 文件名
> 
> less 文件名
> 
> #只看前面几行
> head 文件名
> 
> #只看最后几行
> tail 文件名
> ```

### 移动和重命名

> ```shell
> mv 文件名 新文件名 | 路径
> 
> # 如果第二个参数指定的路径不存在，就是重命名，如果第二个参数路径存在，则是移动
> ```

### 复制文件

> ```sh
> cp 文件名 目录
> 复制文件到指定目录
> ```

### 删除文件

> ```shell
> 删除文件
> rm [-f] 文件名
> -f：是否询问
> ```

## 压缩包

### 针对tar命令

> ```
> Linux当中常用的压缩包，大多数都是.tar, .tar.gz, .tgz的
> ```
>
> 解压：针对压缩包后缀的情况，采用不同的参数，否则可能会出现损失文件
>
> ```shell
> tar [-zxvf] 压缩包名称 [-c 路径]
> 
> # -z： 代表压缩包后缀是.gz
> # -x: 代表解压
> # -v： 加压时，打印详细信息
> # -f： f必须放在所有参数的最后，代表指定文件名称
> # -C 路径： 代表将压缩包内容加压到指定路径
> ```
>
> 压缩：可以将多个文件或者文件夹打包成压缩包，根据选择的参数指定压缩包
>
> ```shell
> tar [-zcvf] 压缩包文件名 文件1 文件2 目录1 目录2...
> -c 代表压缩
> 其余参数同上
> ```

### 针对zip格式的压缩包

> Linux不仅仅针对tar类型的压缩包，也支持zip，rar这种windows下的压缩包
>
> 不过需要安装软件针对各种类型的压缩包格式
>
> ```
> zip 压缩包文件名  文件1 文件2 目录1 目录2 ...
> unzip 压缩包名称
> ```
>



