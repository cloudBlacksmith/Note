# 关于linux的文件
 Windows系统格式化硬盘时，会指定格式FAT或者NTFS，而Linux的文件系统格式为ext3、ext4或者xfs。早期的Linux使用ext2格式，CentOs5默认使用ext3，CentOS6默认使用ext4，而目前最新的CentOs7默认使用xfs格式。ext2文件系统量然高效、稳定，但随着Linux系统在关键业务中的应用，Limux文件系统的弱点也逐渐显露出来。因为ext2文件系统不是日志文件系统，这在关键行业是一个致命的弱点。

 ext3文件系统是直接从ext2文件系统发展而来的，它带有日志功能，可以跟踪记录文件系统的变化，并将变化内容写入日志。写操作首先是对日志记录文件进行操作，若整个写操作由于某种原因（如系统掉电）而中断，当系统重启时，会根据日志记录来恢复中断前的写操作，而且这个过程费时极短。目前，ext3文件系统已经非常稳定、可靠，它完全兼容ext2文件系统，用户可以平滑地过渡到一个日志功能健全的文件系统。这实际上也是ext3日志文件系统设计的初束。

  

 而ext4文件系统，较ext3文件系统又有很多好的特性，其中最明显的特征是ext4支持的最大文件系统容量和单个最大文件大小比ext3大了许多，二者之间的详细区别不再介绍。虽然ext4支持的单个文件大小已经达到了16TB，最大文件支持到40多亿，但依然还是有瓶颈的，xfs支持的量级要比ext4大得多。CentOs7默认采用xfs也是必然的，还有一个原因，xfs的开发者目前受属于RedHat公司，ext4的开发者受厘于Google公司。

  

 Linux文件系统在Windows中是不能识别的，但在Linux系统中可以挂载Windows文件系统。Linux目前支持MS-DOS、VFAT、FAT、BSD等格式，如果你使用的是RedHat或者Centos，那么请不要要图挂载NTFS格式的分区到Limux下，因为它不支持NTFS。当有这方面的需求时，我们可以通过安装ntfs-3g软件包来解决这个问题

  

 除了ext3/ext4文件系统外，有些Linux发行版（如SUSE）默认的文件系统为ReiserFS，它在处理小于1KB的文件时的速度是ext文件系统的10倍。另外，ReiserFS空间浪费较少，它不会为一些小文件分配inode，而是打包存放在同一个磁盘块中。而ext是把它们单独存放在不同的块上。例如，块大小为4KB，那么两个100字节的文件会占用两个块，ReiserFS则只占用一个块。当然，ReiserFS也有缺点，都要将磁盘重新格式化一次。就是每升级一个版本，你可以使用命令cat/etc/filesystems来查看你的系统所支持的文件系统类型.

 linux在创建文件时，会有三个时间戳：atime(访问时间)、ctime(修改时间)、mtime（修改文件内容的时间）


# 文件类型

|        类型         |                                                                                                  含义                                                                                                   |
| :---------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| 普通文件（regularfile） |                           即一般类型的文件，当用命令1s-1查看某个目录时，第一个属性为的文件就是普通文件。它又可分成纯文本文件（ASCII）和二进制文件（binary）。纯文本文件可以通过cat、more、less等工具直接查看内容，而二进制文件不能。例如，我们用的命令/usr/bin/ls就是一个二进制文件。                            |
|  目录  （directory）  |                                                      它与Windows下的文件夹类似，只不过在Linux中我们不将其称为“文件夹”，而称为“目录”。用命令ls -l、查看的第一个属性值为d的文件就是目录。链接文件（linkfle）：                                                       |
| 链接文件<br>（linkfle） |                                                      用命令ls -l查看的第一个属性为l的文件就是链接文件，它类似于Windows下的快捷方式。这种文件在Linux中很常见，在日常系统运维工作中经常用到所以你要特别留意一下这类文件。                                                       |
|    设备(device)     | 即与系统周边相关的一些文件，通常都集中在/dev目录下。这种文件一般分为两种，一种是块（block）设备，就是一些存储数据，以提供系统存取的接口设备，简称硬盘。例如，第一块硬盘是/dev/sdal，用命令ls -l查看的第一个属性值为b的文件就是块设备。另一种是字符（character）设备，是一些串行端口的接口设备，例如键盘、鼠标等，用命令ls -l查看的第一个属性为c的文件就是字符设备。 |



>[!NOTE] 关于linux文件的存储
> inode
>
> ​	保存元数据	#存属性
>
> block
>
> ​	保存数据		#存数据
>
> 关于Linux文件权限的解读
>
> -rw-r--r-- 1 root root 0 1月 18 11：08 loacl.text
>
> 0位 “-”	表示这是一个文件 “d"为目录
>
> 1-3位 表示拥有者的权限
>
> 4-6位 表明同拥有组中的成员的权限
>
> 7-9位 表明其他用户的权限
>
> 10位 “1”硬链接 	#个人理解：表示index与black的链接数（相当于一个指针，他指向了几个文件存储地）
>
> 11-14 表示文件的拥有者
>
> 15-18 表示文件的拥有组
>
> 19 表示文件所占用的字节
>
> 20-] 表示文件的创建时间

## linux的后缀名

在Linux系统中，文件的后缀名没有具体意义，加或者不加都无所谓。但是为了使于区分，加一个.

| 后缀    | 含义      |
| ------- | --------- |
| .sh     | shell脚本 |
| .tar.gz | 压缩包    |
| .cnf    | 配置文件  |
| .zip    | 压缩文件  |

**早期的UNIX系统文件名最多允许14个字符，而新的UNIX或者Linux系统中，文件名最长可达255个字符。**

# 基础权限

| 字母 | 全拼    | 数字 | 意义 |
| ---- | ------- | ---- | ---- |
| r    | read    | 4    | 读取 |
| w    | write   | 2    | 写入 |
| x    | exceute | 1    | 执行 |

# 特殊权限

| 字母       | 数字 | 意义                                                         |
| ---------- | ---- | ------------------------------------------------------------ |
| SUID       | 4    | 当一个二进制文件拥有SUID权限后，当其他用户执行该二进制文件的时候，该二进制文件就会以他所有者的权限去执行 |
| SGID       | 2    | 要求文件夹下的新建的子文件夹或者子文件继承父文件夹的属组     |
| sticky bit | 1    | 如果给文件夹 赋予粘连位 则该文件夹下的文件或文件夹只能由所有者及ROOT删除 |

# 隐藏权限

| 字母 | 意义                                                         |
| ---- | ------------------------------------------------------------ |
| A    | 即Atime，告诉系统不要修改对这个文件的最后访问时间。          |
| S    | 即Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘。 |
| a    | 即Append Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件。 |
| b    | 不更新文件或目录的最后存取时间。                             |
| c    | 将文件或目录压缩后存放。                                     |
| d    | 当dump程序执行时，该文件或目录不会被dump备份。               |
| D    | 检查压缩文件中的错误。                                       |
| i    | 即Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件。 |
| s    | 彻底删除文件，不可恢复，因为是从磁盘上删除，然后用0填充文件所在区域。 |
| u    | 当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件，用来防止意外删除文件或目录。 |
| t    | 文件系统支持尾部合并(tail-merging)。                         |
| x    | 可以直接访问压缩文件的内容                                   |
| e    | 表示文件以ext4 extents存储的，ext4上新建文件的默认属性，不可用chattr修改 |


# 硬链接
当系统要读取一个文件时，会先读inode信息，然后再根据inode中的信息到块区域将数据取出来。而硬链接是直接再建立一个inode链接到文件放置的块区域，即进行硬链接时该文件内容没有任何变化，只是增加了一个指向这个文件的inode，并不会额外占用磁盘空间。

硬链接有两个限制：
（1）不能跨文件系统，因为不同的文件系统有不同的inodetable；

（2）不能链接目录。

# 软连接(符号链接)

  

有主次之分,记录原文件的位置，原文件删除，则该文件无法访问。 软连接结点不一样,链接数也不增长

  

可以跨设备----针对文件夹也可以创建

必须是软连接的目录（原文件，必须全路径）

  

只关心原始文件的名字（也就是你把源文件删了，新建一个同名的文件，则以前的那个软连接会直接，连接到这个新文件上）

修改任何一个文件，所有的文件都会被修改

| 目录         | 说明                                                                                     |
|--------------|------------------------------------------------------------------------------------------|
| **/bin**     | bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。                                          |
| **/boot**    | 这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。                                        |
| **/dev**     | dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。             |
| **/etc**     | etc 是 Etcetera(等等) 的缩写, 这个目录用来存放所有的系统管理所需要的配置文件和子目录。                                  |
| **/home**    | 用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如 alice、bob 和 eve。      |
| **/lib**     | lib 是 Library(库) 的缩写, 这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。 |
| **/lost+found** | 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。                                         |
| **/media**   | linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。                       |
| **/mnt**     | 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。           |
| **/opt**     | opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。    |
| **/proc**    | proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件。这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。 |
| **/root**    | 该目录为系统管理员，也称作超级权限者的用户主目录。                                                            |
| **/sbin**    | s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。        |
| **/selinux** | 这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。|
| **/srv**     | 该目录存放一些服务启动之后需要提取的数据。                                                               |
| **/sys**     | 这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。 |
| **/tmp**     | tmp 是 temporary(临时) 的缩写, 这个目录是用来存放一些临时文件的。                                               |
| **/usr**     | usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。|
| **/usr/bin** | 系统用户使用的应用程序。                                                                         |
| **/usr/sbin**| 超级用户使用的比较高级的管理程序和系统守护程序。                                                              |
| **/usr/src** | 内核源代码默认的放置目录。                                                                           |
| **/var**     | var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。         |
| **/run**     | 是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。 |
